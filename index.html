<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Jeu Plateau</title>
<style>
  body { font-family: Arial; background: #222; color: #fff; }
  #plateau { position: relative; width: 500px; height: 500px; background: url('https://github.com/stephanelavallee89-crypto/Mon-jeux-/blob/main/plateau%20jeux.jpg?raw=true') no-repeat center/cover; margin: 20px auto; border: 2px solid #000; }
  .pion { position: absolute; width: 30px; height: 30px; border-radius: 50%; text-align: center; line-height: 30px; font-weight: bold; color: #fff; }
  #bandeau { width: 500px; margin: 10px auto; background: #111; text-align: center; font-size: 18px; padding: 10px; border-radius: 5px; min-height: 50px; }
  button { margin: 5px; padding: 5px 10px; font-size: 16px; }
</style>
</head>
<body>

<div id="plateau"></div>
<div id="bandeau">Appuyez sur Start pour commencer</div>

<div style="text-align:center;">
  Joueurs: <select id="nbJoueurs">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
  </select>
  <button id="startBtn">Start</button>
  <button id="resetBtn">Reset</button>
  <button id="rollBtn">Lancer Dé</button>
  Dé: <span id="scoreDes">0</span>
  Tour: <span id="tourJoueur">-</span>
</div>

<script>
// coordonnées des 25 cases en spirale (à ajuster si nécessaire)
const casesCoord = [
  {x:50, y:50},{x:150, y:50},{x:250, y:50},{x:350, y:50},{x:450, y:50},
  {x:450, y:150},{x:450, y:250},{x:450, y:350},{x:450, y:450},{x:350, y:450},
  {x:250, y:450},{x:150, y:450},{x:50, y:450},{x:50, y:350},{x:50, y:250},
  {x:150, y:250},{x:250, y:250},{x:350, y:250},{x:350, y:150},{x:250, y:150},
  {x:150, y:150},{x:150, y:350},{x:250, y:350},{x:350, y:350},{x:250, y:250}
];

const actionsCases = [
  "Tout le monde se sert à boire !", "Fredonne la chanson que te souffle le joueur à ta droite si les autres joueurs ne trouvent pas tu bois :)", 
  "Embrasse le joueur à ta droite", "Pose une colle au joueur de ton choix s'il perd il boit sinon c'est toi ;)", 
  "Tout le monde trinque", "Echange un vêtement avec le joueur à ta gauche et faites un selfie", 
  "Mime ce que te souffle le joueur de droite, les autres joueurs trouvent pas tu bois ;)", 
  "Action vide", // case 8 vide
  "Echange ton verre avec le joueur à ta droite", "Désigne ton joueur favori", 
  "Retour à la case départ !", "Dessine ce que te souffle le joueur à ta gauche si les autres joueurs ne trouvent pas tu bois !", 
  "Pose une colle au joueur de ton choix si il perd il boit sinon c'est toi ;)", "Embrasse le joueur à ta gauche", 
  "Echange un vêtement avec le joueur à ta droite et faites un selfie", "Passe ton tour ! Et bois un coup tant qu'à faire :)", 
  "Echange ton verre avec le joueur à ta gauche", "Dessine ce que te souffle le joueur à ta droite si les autres joueurs ne trouvent pas tu bois !", 
  "Avance de 3 cases ... je pense que tu avais soif :)", "Fredonne la chanson que te souffle le joueur à ta gauche si les autres joueurs ne trouvent pas tu bois :)", 
  "Pose une question osée au joueur de ton choix s'il ne répond pas il boit", "Cul sec !", 
  "Mime ce que te souffle le joueur à ta gauche si les autres joueurs ne trouvent pas tu bois ;)", "Pose une colle au joueur de ton choix si il perd il boit sinon c'est toi ;)", 
  "Tu as gagné le droit de demander le service que tu veux au joueur de ton choix"
];

let joueurs = [];
let nbJoueurs = 0;
let tour = 0;

const plateau = document.getElementById('plateau');
const bandeau = document.getElementById('bandeau');
const scoreDes = document.getElementById('scoreDes');
const tourJoueur = document.getElementById('tourJoueur');

// Créer les pions
function creerJoueurs(n){
    plateau.innerHTML = '';
    joueurs = [];
    for(let i=0;i<n;i++){
        const pion = document.createElement('div');
        pion.className = 'pion';
        pion.id = `pion${i}`;
        pion.style.background = ['red','blue','green','yellow','orange','purple'][i];
        pion.textContent = i+1;
        plateau.appendChild(pion);
        joueurs.push({id:i, case:1});
    }
}

// calculer position centrée avec décalage pour éviter chevauchement
function getPionPosition(caseNum, joueurIndex, totalJoueurs){
    const base = casesCoord[caseNum-1];
    const offset = 20;
    const angle = (2*Math.PI/totalJoueurs) * joueurIndex;
    const x = base.x + Math.cos(angle)*offset;
    const y = base.y + Math.sin(angle)*offset;
    return {x, y};
}

// placer tous les pions sur leur case
function updatePions(){
    for(let i=0;i<joueurs.length;i++){
        const sameCase = joueurs.filter(j=>j.case === joueurs[i].case);
        const pos = getPionPosition(joueurs[i].case, sameCase.indexOf(joueurs[i]), sameCase.length);
        const pionElem = document.getElementById(`pion${joueurs[i].id}`);
        pionElem.style.left = pos.x+'px';
        pionElem.style.top = pos.y+'px';
    }
}

// afficher action
function afficherAction(caseNum){
    bandeau.textContent = actionsCases[caseNum-1];
}

// Start
document.getElementById('startBtn').onclick = ()=>{
    nbJoueurs = parseInt(document.getElementById('nbJoueurs').value);
    creerJoueurs(nbJoueurs);
    tour = 0;
    // mettre tous sur la case départ
    joueurs.forEach(j=>j.case=1);
    updatePions();
    afficherAction(1);
    tourJoueur.textContent = `Joueur ${tour+1}`;
}

// Reset
document.getElementById('resetBtn').onclick = ()=>{
    tour = 0;
    joueurs.forEach(j=>j.case=1);
    updatePions();
    afficherAction(1);
    tourJoueur.textContent = `Joueur ${tour+1}`;
    scoreDes.textContent = '0';
}

// lancer dé
document.getElementById('rollBtn').onclick = ()=>{
    const de = Math.floor(Math.random()*6)+1;
    scoreDes.textContent = de;
    let j = joueurs[tour];
    j.case += de;

    // cases spéciales
    if(j.case===11){ j.case=1; } // retour départ
    if(j.case===19){ j.case +=3; if(j.case>25) j.case=25; } // avance 3

    if(j.case>25) j.case=25;

    updatePions();
    afficherAction(j.case);

    // passer au joueur suivant
    tour = (tour+1)%nbJoueurs;
    tourJoueur.textContent = `Joueur ${tour+1}`;
}
</script>

</body>
</html>
